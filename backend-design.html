<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>OBS Studio Backend Design &mdash; OBS Studio 27.2.4 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Plugins" href="plugins.html" />
    <link rel="prev" title="Welcome to OBS Studio’s documentation!" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #256eff" >
            <a href="index.html">
            <img src="_static/logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                27.2.4
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Core Concepts</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">OBS Studio Backend Design</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#libobs-plugin-objects">Libobs Plugin Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="#libobs-threads">Libobs Threads</a></li>
<li class="toctree-l2"><a class="reference internal" href="#output-channels">Output Channels</a></li>
<li class="toctree-l2"><a class="reference internal" href="#general-video-pipeline-overview">General Video Pipeline Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#general-audio-pipeline-overview">General Audio Pipeline Overview</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="plugins.html">Plugins</a><ul>
<li class="toctree-l2"><a class="reference internal" href="plugins.html#plugin-module-headers">Plugin Module Headers</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugins.html#common-directory-structure-and-cmakelists-txt">Common Directory Structure and CMakeLists.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugins.html#native-plugin-initialization">Native Plugin Initialization</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugins.html#sources">Sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugins.html#outputs">Outputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugins.html#encoders">Encoders</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugins.html#services">Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugins.html#settings">Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugins.html#properties">Properties</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugins.html#localization">Localization</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="frontends.html">Frontends</a><ul>
<li class="toctree-l2"><a class="reference internal" href="frontends.html#initialization-and-shutdown">Initialization and Shutdown</a></li>
<li class="toctree-l2"><a class="reference internal" href="frontends.html#reconfiguring-video">Reconfiguring Video</a></li>
<li class="toctree-l2"><a class="reference internal" href="frontends.html#displays">Displays</a></li>
<li class="toctree-l2"><a class="reference internal" href="frontends.html#saving-loading-objects-and-object-management">Saving/Loading Objects and Object Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="frontends.html#signals">Signals</a></li>
<li class="toctree-l2"><a class="reference internal" href="frontends.html#displaying-sources">Displaying Sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="frontends.html#outputs-encoders-and-services">Outputs, Encoders, and Services</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="graphics.html">Rendering Graphics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="graphics.html#the-graphics-context">The Graphics Context</a></li>
<li class="toctree-l2"><a class="reference internal" href="graphics.html#creating-effects">Creating Effects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="graphics.html#effect-parameters">Effect Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="graphics.html#effect-sampler-states">Effect Sampler States</a></li>
<li class="toctree-l3"><a class="reference internal" href="graphics.html#effect-vertex-pixel-semantics">Effect Vertex/Pixel Semantics</a></li>
<li class="toctree-l3"><a class="reference internal" href="graphics.html#effect-techniques">Effect Techniques</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="graphics.html#using-effects">Using Effects</a></li>
<li class="toctree-l2"><a class="reference internal" href="graphics.html#rendering-video-sources">Rendering Video Sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="graphics.html#rendering-video-effect-filters">Rendering Video Effect Filters</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="scripting.html">Python/Lua Scripting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="scripting.html#script-function-exports">Script Function Exports</a></li>
<li class="toctree-l2"><a class="reference internal" href="scripting.html#getting-the-current-script-s-path">Getting the Current Script’s Path</a></li>
<li class="toctree-l2"><a class="reference internal" href="scripting.html#script-timers">Script Timers</a></li>
<li class="toctree-l2"><a class="reference internal" href="scripting.html#script-sources-lua-only">Script Sources (Lua Only)</a></li>
<li class="toctree-l2"><a class="reference internal" href="scripting.html#other-differences-from-the-c-api">Other Differences From the C API</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="reference-core.html">OBS Core</a><ul>
<li class="toctree-l2"><a class="reference internal" href="reference-core.html#initialization-shutdown-and-information">Initialization, Shutdown, and Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference-core.html#libobs-objects">Libobs Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference-core.html#video-audio-and-graphics">Video, Audio, and Graphics</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference-core.html#primary-signal-procedure-handlers">Primary signal/procedure handlers</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference-core.html#core-obs-signals">Core OBS Signals</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference-core.html#displays">Displays</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="reference-modules.html">Modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="reference-modules.html#module-macros">Module Macros</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference-modules.html#module-exports">Module Exports</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference-modules.html#module-externs">Module Externs</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference-modules.html#frontend-module-functions">Frontend Module Functions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="reference-core-objects.html">Core API Object</a><ul>
<li class="toctree-l2"><a class="reference internal" href="reference-sources.html">Sources (obs_source_t)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="reference-sources.html#source-definition-structure-obs-source-info">Source Definition Structure (obs_source_info)</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-sources.html#source-signals">Source Signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-sources.html#general-source-functions">General Source Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-sources.html#functions-used-by-sources">Functions used by sources</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-sources.html#filters">Filters</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-sources.html#functions-used-by-filters">Functions used by filters</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-sources.html#transitions">Transitions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-sources.html#functions-used-by-transitions">Functions used by transitions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reference-scenes.html">Scenes (obs_scene_t)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="reference-scenes.html#scene-item-transform-structure-obs-transform-info">Scene Item Transform Structure (obs_transform_info)</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-scenes.html#scene-item-crop-structure-obs-sceneitem-crop">Scene Item Crop Structure (obs_sceneitem_crop)</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-scenes.html#scene-item-order-info-structure-obs-sceneitem-order-info">Scene Item Order Info Structure (*obs_sceneitem_order_info)</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-scenes.html#scene-signals">Scene Signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-scenes.html#general-scene-functions">General Scene Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-scenes.html#scene-item-functions">Scene Item Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-scenes.html#scene-item-group-functions">Scene Item Group Functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reference-outputs.html">Outputs (obs_output_t)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="reference-outputs.html#output-definition-structure-obs-output-info">Output Definition Structure (obs_output_info)</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-outputs.html#output-signals">Output Signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-outputs.html#general-output-functions">General Output Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-outputs.html#functions-used-by-outputs">Functions used by outputs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reference-encoders.html">Encoders (obs_encoder_t)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="reference-encoders.html#encoder-definition-structure-obs-encoder-info">Encoder Definition Structure (obs_encoder_info)</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-encoders.html#encoder-packet-structure-encoder-packet">Encoder Packet Structure (encoder_packet)</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-encoders.html#raw-frame-data-structure-encoder-frame">Raw Frame Data Structure (encoder_frame)</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-encoders.html#general-encoder-functions">General Encoder Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-encoders.html#functions-used-by-encoders">Functions used by encoders</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reference-services.html">Services (obs_service_t)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="reference-services.html#service-definition-structure">Service Definition Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-services.html#general-service-functions">General Service Functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reference-settings.html">Data Settings (obs_data_t)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="reference-settings.html#general-functions">General Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-settings.html#set-functions">Set Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-settings.html#get-functions">Get Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-settings.html#default-value-functions">Default Value Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-settings.html#autoselect-functions">Autoselect Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-settings.html#array-functions">Array Functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reference-properties.html">Properties (obs_properties_t)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="reference-properties.html#general-functions">General Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-properties.html#property-object-functions">Property Object Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-properties.html#property-enumeration-functions">Property Enumeration Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-properties.html#property-modification-functions">Property Modification Functions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="reference-libobs-util.html">Platform/Utility</a><ul>
<li class="toctree-l2"><a class="reference internal" href="reference-libobs-util-base.html">Logging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-util-base.html#logging-levels">Logging Levels</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-util-base.html#logging-functions">Logging Functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reference-libobs-util-bmem.html">Memory Management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-util-bmem.html#memory-functions">Memory Functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reference-libobs-util-circlebuf.html">Circular Buffers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-util-circlebuf.html#circular-buffer-structure-struct-circlebuf">Circular Buffer Structure (struct circlebuf)</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-util-circlebuf.html#circular-buffer-inline-functions">Circular Buffer Inline Functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reference-libobs-util-config-file.html">Config Files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-util-config-file.html#config-file-functions">Config File Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-util-config-file.html#set-get-functions">Set/Get Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-util-config-file.html#default-value-functions">Default Value Functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reference-libobs-util-darray.html">Dynamic Arrays</a><ul>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-util-darray.html#dynamic-array-macros">Dynamic Array Macros</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reference-libobs-util-dstr.html">Dynamic Strings And String Helpers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-util-dstr.html#dynamic-string-structure-struct-dstr">Dynamic String Structure (struct dstr)</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-util-dstr.html#general-string-helper-functions">General String Helper Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-util-dstr.html#dynamic-string-functions">Dynamic String Functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reference-libobs-util-platform.html">Platform Helpers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-util-platform.html#file-functions">File Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-util-platform.html#string-conversion-functions">String Conversion Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-util-platform.html#number-string-conversion-functions">Number/String Conversion Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-util-platform.html#dynamic-link-library-functions">Dynamic Link Library Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-util-platform.html#cpu-usage-functions">CPU Usage Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-util-platform.html#sleep-time-functions">Sleep/Time Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-util-platform.html#other-path-file-functions">Other Path/File Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-util-platform.html#sleep-inhibition-functions">Sleep-Inhibition Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-util-platform.html#other-functions">Other Functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reference-libobs-util-profiler.html">Profiler</a><ul>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-util-profiler.html#profiler-structures">Profiler Structures</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-util-profiler.html#profiler-control-functions">Profiler Control Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-util-profiler.html#profiling-functions">Profiling Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-util-profiler.html#profiler-name-storage-functions">Profiler Name Storage Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-util-profiler.html#profiler-data-access-functions">Profiler Data Access Functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reference-libobs-util-serializers.html">Serializer</a><ul>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-util-serializers.html#serializer-structure-struct-serializer">Serializer Structure (struct serializer)</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-util-serializers.html#serializer-inline-functions">Serializer Inline Functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reference-libobs-util-serializers.html#array-output-serializer">Array Output Serializer</a><ul>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-util-serializers.html#array-output-serializer-structure-struct-array-output-data">Array Output Serializer Structure (struct array_output_data)</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-util-serializers.html#array-output-serializer-functions">Array Output Serializer Functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reference-libobs-util-serializers.html#file-input-output-serializers">File Input/Output Serializers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-util-serializers.html#file-input-serializer-functions">File Input Serializer Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-util-serializers.html#file-output-serializer-functions">File Output Serializer Functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reference-libobs-util-text-lookup.html">Text Lookup Interface</a><ul>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-util-text-lookup.html#text-lookup-functions">Text Lookup Functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reference-libobs-util-threading.html">Threading</a><ul>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-util-threading.html#threading-types">Threading Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-util-threading.html#general-thread-functions">General Thread Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-util-threading.html#event-functions">Event Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-util-threading.html#semaphore-functions">Semaphore Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-util-threading.html#atomic-inline-functions">Atomic Inline Functions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="reference-libobs-callback.html">Callbacks (libobs/callback)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="reference-libobs-callback.html#calldata">Calldata</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference-libobs-callback.html#signals">Signals</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference-libobs-callback.html#procedure-handlers">Procedure Handlers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="reference-libobs-graphics.html">Graphics (libobs/graphics)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="reference-libobs-graphics-effects.html">Effects (Shaders)</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference-libobs-graphics-vec2.html">2-Component Vector</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference-libobs-graphics-vec3.html">3-Component Vector</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference-libobs-graphics-vec4.html">4-Component Vector</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference-libobs-graphics-quat.html">Quaternion</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference-libobs-graphics-matrix4.html">Matrix</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference-libobs-graphics-math.html">Extra Math Functions/Macros</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference-libobs-graphics-image-file.html">Image File Helper</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference-libobs-graphics-axisang.html">Axis Angle</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference-libobs-graphics-graphics.html">Core Graphics API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-graphics-graphics.html#graphics-enumerations">Graphics Enumerations</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-graphics-graphics.html#graphics-structures">Graphics Structures</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-graphics-graphics.html#initialization-functions">Initialization Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-graphics-graphics.html#matrix-stack-functions">Matrix Stack Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-graphics-graphics.html#draw-functions">Draw Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-graphics-graphics.html#swap-chains">Swap Chains</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-graphics-graphics.html#resource-loading">Resource Loading</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-graphics-graphics.html#id1">Draw Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-graphics-graphics.html#texture-functions">Texture Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-graphics-graphics.html#cube-texture-functions">Cube Texture Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-graphics-graphics.html#staging-surface-functions">Staging Surface Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-graphics-graphics.html#z-stencil-functions">Z-Stencil Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-graphics-graphics.html#sampler-state-functions">Sampler State Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-graphics-graphics.html#vertex-buffer-functions">Vertex Buffer Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-graphics-graphics.html#index-buffer-functions">Index Buffer Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-graphics-graphics.html#display-duplicator-windows-only">Display Duplicator (Windows Only)</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-graphics-graphics.html#monitor-functions">Monitor Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-graphics-graphics.html#render-helper-functions">Render Helper Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-libobs-graphics-graphics.html#graphics-types">Graphics Types</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="reference-libobs-media-io.html">Media I/O (libobs/media-io)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="reference-libobs-media-io.html#video-handler">Video Handler</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference-libobs-media-io.html#audio-handler">Audio Handler</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference-libobs-media-io.html#resampler">Resampler</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="reference-frontend-api.html">OBS Studio Frontend API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="reference-frontend-api.html#structures-enumerations">Structures/Enumerations</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference-frontend-api.html#functions">Functions</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Additional Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://obsproject.com/wiki/Install-Instructions">Build Instructions</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/obsproject/obs-plugintemplate#obs-plugin-template">Plugin Template</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #256eff" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">OBS Studio</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>OBS Studio Backend Design</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/OBSProject/obs-studio/blob/master/docs/sphinx/backend-design.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to OBS Studio’s documentation!" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="plugins.html" class="btn btn-neutral float-right" title="Plugins" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="obs-studio-backend-design">
<h1>OBS Studio Backend Design<a class="headerlink" href="#obs-studio-backend-design" title="Permalink to this headline"></a></h1>
<p>The OBS Studio backend is powered by the library libobs.  Libobs
provides the main pipeline, the video/audio subsystems, and the general
framework for all plugins.</p>
<section id="libobs-plugin-objects">
<h2>Libobs Plugin Objects<a class="headerlink" href="#libobs-plugin-objects" title="Permalink to this headline"></a></h2>
<p>Libobs is designed to be modular, where adding modules will add custom
functionality.  There are four libobs objects that you can make plugins
for:</p>
<ul class="simple">
<li><p><a class="reference internal" href="plugins.html#plugins-sources"><span class="std std-ref">Sources</span></a> – Sources are used to render video and/or
audio on stream.  Things such as capturing displays/games/audio,
playing a video, showing an image, or playing audio.  Sources can also
be used to implement audio and video filters.</p></li>
<li><p><a class="reference internal" href="plugins.html#plugins-outputs"><span class="std std-ref">Outputs</span></a> – Outputs allow the ability to output the
currently rendering audio/video.  Streaming and recording are two
common examples of outputs, but not the only types of outputs.
Outputs can receive the raw data or receive encoded data.</p></li>
<li><p><a class="reference internal" href="plugins.html#plugins-encoders"><span class="std std-ref">Encoders</span></a> – Encoders are OBS-specific implementations
of video/audio encoders, which are used with outputs that use
encoders.  x264, NVENC, Quicksync are examples of encoder
implementations.</p></li>
<li><p><a class="reference internal" href="plugins.html#plugins-services"><span class="std std-ref">Services</span></a> – Services are custom implementations of
streaming services, which are used with outputs that stream.  For
example, you could have a custom implementation for streaming to
Twitch, and another for YouTube to allow the ability to log in and use
their APIs to do things such as get the RTMP servers or control the
channel.</p></li>
</ul>
<p><em>(Author’s note: the service API is incomplete as of this writing)</em></p>
</section>
<section id="libobs-threads">
<h2>Libobs Threads<a class="headerlink" href="#libobs-threads" title="Permalink to this headline"></a></h2>
<p>There are three primary threads spawned by libobs on initialization:</p>
<ul class="simple">
<li><p>The <a class="reference external" href="https://github.com/obsproject/obs-studio/blob/2c58185af3c85f4e594a4c067c9dfe5fa4b5b0a9/libobs/obs-video.c#L588-L651">obs_graphics_thread</a> function used exclusively for rendering in
<a class="reference external" href="https://github.com/obsproject/obs-studio/blob/master/libobs/obs-video.c">libobs/obs-video.c</a></p></li>
<li><p>The <a class="reference external" href="https://github.com/obsproject/obs-studio/blob/2c58185af3c85f4e594a4c067c9dfe5fa4b5b0a9/libobs/media-io/video-io.c#L169-L195">video_thread</a> function used exclusively for video encoding/output
in <a class="reference external" href="https://github.com/obsproject/obs-studio/blob/master/libobs/media-io/video-io.c">libobs/media-io/video-io.c</a></p></li>
<li><p>The <a class="reference external" href="https://github.com/obsproject/obs-studio/blob/2c58185af3c85f4e594a4c067c9dfe5fa4b5b0a9/libobs/media-io/audio-io.c#L241-L282">audio_thread</a> function used for all audio
processing/encoding/output in <a class="reference external" href="https://github.com/obsproject/obs-studio/blob/master/libobs/media-io/audio-io.c">libobs/media-io/audio-io.c</a></p></li>
</ul>
<p><em>(Author’s note: obs_graphics_thread was originally named
obs_video_thread; it was renamed as of this writing to prevent confusion
with video_thread)</em></p>
</section>
<section id="output-channels">
<span id="id1"></span><h2>Output Channels<a class="headerlink" href="#output-channels" title="Permalink to this headline"></a></h2>
<p>Rendering video or audio starts from output channels.  You assign a
source to an output channel via the <a class="reference internal" href="reference-core.html#c.obs_set_output_source" title="obs_set_output_source"><code class="xref c c-func docutils literal notranslate"><span class="pre">obs_set_output_source()</span></code></a>
function.  The <em>channel</em> parameter can be any number from
0..(<a class="reference external" href="https://github.com/obsproject/obs-studio/blob/2c58185af3c85f4e594a4c067c9dfe5fa4b5b0a9/libobs/obs-defs.h#L20-L21">MAX_CHANNELS</a>-1).  You may initially think that this is how you
display multiple sources at once; however, sources are hierarchical.
Sources such as scenes or transitions can have multiple sub-sources, and
those sub-sources in turn can have sub-sources and so on (see
<a class="reference internal" href="frontends.html#displaying-sources"><span class="std std-ref">Displaying Sources</span></a> for more information).  Typically, you would
use scenes to draw multiple sources as a group with specific transforms
for each source, as a scene is just another type of source.  The
“channel” design allows for highly complex video presentation setups.
The OBS Studio front-end has yet to even fully utilize this back-end
design for its rendering, and currently only uses one output channel to
render one scene at a time.  It does however utilize additional channels
for things such as global audio sources which are set in audio settings.</p>
<p><em>(Author’s note: “Output channels” are not to be confused with output
objects or audio channels.  Output channels are used to set the sources
you want to output, and output objects are used for actually
streaming/recording/etc.)</em></p>
</section>
<section id="general-video-pipeline-overview">
<h2>General Video Pipeline Overview<a class="headerlink" href="#general-video-pipeline-overview" title="Permalink to this headline"></a></h2>
<p>The video graphics pipeline is run from two threads: a dedicated
graphics thread that renders preview displays as well as the final mix
(the <a class="reference external" href="https://github.com/obsproject/obs-studio/blob/2c58185af3c85f4e594a4c067c9dfe5fa4b5b0a9/libobs/obs-video.c#L588-L651">obs_graphics_thread</a> function in <a class="reference external" href="https://github.com/obsproject/obs-studio/blob/master/libobs/obs-video.c">libobs/obs-video.c</a>), and a
dedicated thread specific to video encoding/output (the <a class="reference external" href="https://github.com/obsproject/obs-studio/blob/2c58185af3c85f4e594a4c067c9dfe5fa4b5b0a9/libobs/media-io/video-io.c#L169-L195">video_thread</a>
function in <a class="reference external" href="https://github.com/obsproject/obs-studio/blob/master/libobs/media-io/video-io.c">libobs/media-io/video-io.c</a>).</p>
<p>Sources assigned to output channels will be drawn from channels
0..(<a class="reference external" href="https://github.com/obsproject/obs-studio/blob/2c58185af3c85f4e594a4c067c9dfe5fa4b5b0a9/libobs/obs-defs.h#L20-L21">MAX_CHANNELS</a>-1).  They are drawn on to the final texture which will
be used for output <a class="reference external" href="https://github.com/obsproject/obs-studio/blob/2c58185af3c85f4e594a4c067c9dfe5fa4b5b0a9/libobs/obs-video.c#L99-L129">[1]</a>.  Once all sources are drawn, the final
texture is converted to whatever format that libobs is set to (typically
a YUV format).  After being converted to the back-end video format, it’s
then sent along with its timestamp to the current video handler,
<a class="reference external" href="https://github.com/obsproject/obs-studio/blob/2c58185af3c85f4e594a4c067c9dfe5fa4b5b0a9/libobs/obs-internal.h#L250">obs_core_video::video</a>.</p>
<p>It then puts that raw frame in a queue of <a class="reference external" href="https://github.com/obsproject/obs-studio/blob/2c58185af3c85f4e594a4c067c9dfe5fa4b5b0a9/libobs/media-io/video-io.c#L34">MAX_CACHE_SIZE</a> in the <a class="reference external" href="https://github.com/obsproject/obs-studio/blob/master/libobs/media-io/video-io.c">video
output handler</a>.  A semaphore is posted, then the video-io thread will
process frames as it’s able.  If the video frame queue is full, it will
duplicate the last frame in the queue in an attempt to reduce video
encoding complexity (and thus CPU usage) <a class="reference external" href="https://github.com/obsproject/obs-studio/blob/2c58185af3c85f4e594a4c067c9dfe5fa4b5b0a9/libobs/media-io/video-io.c#L431-L434">[2]</a>.  This is why you may
see frame skipping when the encoder can’t keep up.  Frames are sent to
any raw outputs or video encoders that are currently active <a class="reference external" href="https://github.com/obsproject/obs-studio/blob/2c58185af3c85f4e594a4c067c9dfe5fa4b5b0a9/libobs/media-io/video-io.c#L115-L167">[3]</a>.</p>
<p>If it’s sent to a video encoder object (<a class="reference external" href="https://github.com/obsproject/obs-studio/blob/master/libobs/obs-encoder.c">libobs/obs-encoder.c</a>), it
encodes the frame and sends the encoded packet off to the outputs that
encoder is connected to (which can be multiple).  If the output takes
both encoded video/audio, it puts the packets in an interleave queue to
ensure encoded packets are sent in monotonic timestamp order <a class="reference external" href="https://github.com/obsproject/obs-studio/blob/2c58185af3c85f4e594a4c067c9dfe5fa4b5b0a9/libobs/obs-output.c#L1382-L1439">[4]</a>.</p>
<p>The encoded packet or raw frame is then sent to the output.</p>
</section>
<section id="general-audio-pipeline-overview">
<h2>General Audio Pipeline Overview<a class="headerlink" href="#general-audio-pipeline-overview" title="Permalink to this headline"></a></h2>
<p>The audio pipeline is run from a dedicated audio thread in the audio
handler (the <a class="reference external" href="https://github.com/obsproject/obs-studio/blob/2c58185af3c85f4e594a4c067c9dfe5fa4b5b0a9/libobs/media-io/audio-io.c#L241-L282">audio_thread</a> function in <a class="reference external" href="https://github.com/obsproject/obs-studio/blob/master/libobs/media-io/audio-io.c">libobs/media-io/audio-io.c</a>);
assuming that <a class="reference external" href="https://github.com/obsproject/obs-studio/blob/2c58185af3c85f4e594a4c067c9dfe5fa4b5b0a9/libobs/media-io/audio-io.h#L30">AUDIO_OUTPUT_FRAMES</a> is set to 1024, the audio thread
“ticks” (processes audio data) once every 1024 audio samples (around
every 21 millisecond intervals at 48khz), and calls the <a class="reference external" href="https://github.com/obsproject/obs-studio/blob/2c58185af3c85f4e594a4c067c9dfe5fa4b5b0a9/libobs/obs-audio.c#L367-L485">audio_callback</a>
function in <a class="reference external" href="https://github.com/obsproject/obs-studio/blob/master/libobs/obs-audio.c">libobs/obs-audio.c</a> where most of the audio processing is
accomplished.</p>
<p>A source with audio will output its audio via the
<a class="reference external" href="https://github.com/obsproject/obs-studio/blob/2c58185af3c85f4e594a4c067c9dfe5fa4b5b0a9/libobs/obs-source.c#L2578-L2608">obs_source_output_audio</a> function, and that audio data will be appended
or inserted in to the circular buffer <a class="reference external" href="https://github.com/obsproject/obs-studio/blob/2c58185af3c85f4e594a4c067c9dfe5fa4b5b0a9/libobs/obs-source.c#L1280-L1283">obs_source::audio_input_buf</a>.
If the sample rate or channel count does not match what the back-end is
set to, the audio is automatically remixed/resampled via swresample
<a class="reference external" href="https://github.com/obsproject/obs-studio/blob/2c58185af3c85f4e594a4c067c9dfe5fa4b5b0a9/libobs/obs-source.c#L2561-L2563">[5]</a>.  Before insertion, audio data is also run through any audio
filters attached to the source <a class="reference external" href="https://github.com/obsproject/obs-studio/blob/2c58185af3c85f4e594a4c067c9dfe5fa4b5b0a9/libobs/obs-source.c#L2591">[6]</a>.</p>
<p>Each audio tick, the audio thread takes a reference snapshot of the
audio source tree (stores references of all sources that output/process
audio) <a class="reference external" href="https://github.com/obsproject/obs-studio/blob/2c58185af3c85f4e594a4c067c9dfe5fa4b5b0a9/libobs/obs-audio.c#L393-L415">[7]</a>.  On each audio leaf (audio source), it takes the closest
audio (relative to the current audio thread timestamp) stored in the
circular buffer <a class="reference external" href="https://github.com/obsproject/obs-studio/blob/2c58185af3c85f4e594a4c067c9dfe5fa4b5b0a9/libobs/obs-source.c#L1280-L1283">obs_source::audio_input_buf</a>, and puts it in
<a class="reference external" href="https://github.com/obsproject/obs-studio/blob/2c58185af3c85f4e594a4c067c9dfe5fa4b5b0a9/libobs/obs-internal.h#L580">obs_source::audio_output_buf</a>.</p>
<p>Then, the audio samples stored in <a class="reference external" href="https://github.com/obsproject/obs-studio/blob/2c58185af3c85f4e594a4c067c9dfe5fa4b5b0a9/libobs/obs-internal.h#L580">obs_source::audio_output_buf</a> of the
leaves get sent through their parents in the source tree snapshot for
mixing or processing at each source node in the hierarchy <a class="reference external" href="https://github.com/obsproject/obs-studio/blob/2c58185af3c85f4e594a4c067c9dfe5fa4b5b0a9/libobs/obs-audio.c#L417-L423">[8]</a>.
Sources with multiple children such as scenes or transitions will
mix/process their children’s audio themselves via the
<a class="reference external" href="https://github.com/obsproject/obs-studio/blob/2c58185af3c85f4e594a4c067c9dfe5fa4b5b0a9/libobs/obs-source.h#L410-L412">obs_source_info::audio_render</a> callback.  This allows, for example,
transitions to fade in the audio of one source and fade in the audio of
a new source when they’re transitioning between two sources.  The mix or
processed audio data is then stored in <a class="reference external" href="https://github.com/obsproject/obs-studio/blob/2c58185af3c85f4e594a4c067c9dfe5fa4b5b0a9/libobs/obs-internal.h#L580">obs_source::audio_output_buf</a>
of that node similarly, and the process is repeated until the audio
reaches the root nodes of the tree.</p>
<p>Finally, when the audio has reached the base of the snapshot tree, the
audio of all the sources in each output channel are mixed together for a
final mix <a class="reference external" href="https://github.com/obsproject/obs-studio/blob/2c58185af3c85f4e594a4c067c9dfe5fa4b5b0a9/libobs/obs-audio.c#L436-L453">[9]</a>.  That final mix is then sent to any raw outputs or
audio encoders that are currently active <a class="reference external" href="https://github.com/obsproject/obs-studio/blob/2c58185af3c85f4e594a4c067c9dfe5fa4b5b0a9/libobs/media-io/audio-io.c#L144-L165">[10]</a>.</p>
<p>If it’s sent to an audio encoder object (<a class="reference external" href="https://github.com/obsproject/obs-studio/blob/master/libobs/obs-encoder.c">libobs/obs-encoder.c</a>), it
encodes the audio data and sends the encoded packet off to the outputs
that encoder is connected to (which can be multiple).  If the output
takes both encoded video/audio, it puts the packets in an interleave
queue to ensure encoded packets are sent in monotonic timestamp order
<a class="reference external" href="https://github.com/obsproject/obs-studio/blob/2c58185af3c85f4e594a4c067c9dfe5fa4b5b0a9/libobs/obs-output.c#L1382-L1439">[4]</a>.</p>
<p>The encoded packet or raw audio data is then sent to the output.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to OBS Studio’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="plugins.html" class="btn btn-neutral float-right" title="Plugins" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017-2022, Hugh Bailey.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>